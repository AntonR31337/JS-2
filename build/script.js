(()=>{"use strict";Vue.component("basket",{props:["close"],data:function(){return{basketGoods:[]}},template:'\n      <div class="cart">\n        <h3 class="cart__title">Корзина</h3>\n        <close-button @click="$emit(\'close\')"></close-button>\n        <div>\n          <basket-item v-for="item in basketGoods" :item="item"></basket-item>\n        </div>\n      </div>\n    ',mounted(){fetch(`${URL}/basketgoods`).then((t=>t.json())).then((t=>t)).then((t=>{this.basketGoods=t}))},methods:{fu:function(){basketVision=!1}}}),onload=()=>{Vue.component("search",{props:["click","filter"],data:function(){return{filteredGoods:[],search:""}},template:'\n      <div class="search">\n        <input v-model="search" class="search-text" type="text" placeholder="Что ищешь?">\n        <button id="search" v-on:click="$emit(\'click\', search)" class="search-btn">Искать!</button>\n      </div>\n    '}),Vue.component("custom-button",{props:["click"],template:"\n      <button @click=\"$emit('click')\">\n        <slot></slot>\n      </button>\n    "}),Vue.component("goods-item",{props:["item"],template:'\n      <div>\n        <div class="goods-item">\n          <img class="goods-item__img" src="" alt="goods_image">\n          <h3>{{ item.title }}</h3>\n          <p>{{ item.price }}</p>\n          <div>\n            <custom-button @click="addGood">Добавить</custom-button>\n          </div>\n        </div>\n      </div>\n    ',methods:{addGood(){var t;t=this.item.id,fetch(`${URL}/${t}`,{method:"POST",headers:{"Content-Type":"application/json"}})}}}),Vue.component("basket-item",{props:["item"],template:'\n    <div>\n      <div class="basket_items">\n        <div class="basket_items-item">\n          <h3>{{ item.title }}</h3>\n          <p>{{ item.price }}</p>\n          <p>{{ item.count }}</p>\n          <close-button @click="deleteGood"></close-button>\n        </div>\n        <hr>\n      </div>\n    </div>\n    ',methods:{deleteGood(){var t;t=this.item.id,fetch(`${URL}/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})}}}),Vue.component("close-button",{props:["click"],template:'\n      <button v-on:click="$emit(\'click\')" class="close-btn">X</button>\n    '}),new Vue({el:"#app",data:{goods:[],filteredGoods:[],search:"",basketVision:!1},mounted(){(function(t,e,o="GET"){return new Promise(((s,n)=>{setTimeout((()=>{fetch(`${t}${e}`,{method:o}).then((t=>t.json())).then((t=>{s(t)}))}),1)}))})("http://localhost:8000","/goods.json").then((t=>{this.goods=t,this.filteredGoods=t}))},methods:{filter(t){this.search=t,this.filteredGoods=this.goods.filter((({title:t})=>new RegExp(this.search,"i").test(t)))},showBasket(){1!=this.basketVision?this.basketVision=!0:this.closeBasket.call()},closeBasket(){this.basketVision=!1}}})}})();